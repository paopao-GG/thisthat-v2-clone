# Server Configuration
NODE_ENV=development
PORT=3001
HOST=0.0.0.0

# Databases (PostgreSQL) - Two separate databases
# Markets database - stores market data only
MARKETS_DATABASE_URL=postgresql://postgres:password@localhost:5432/thisthat_markets?schema=public

# Users database - stores user data, bets, transactions, etc.
USERS_DATABASE_URL=postgresql://postgres:password@localhost:5432/thisthat_users?schema=public

# Legacy DATABASE_URL (for backward compatibility during migration)
DATABASE_URL=postgresql://postgres:password@localhost:5432/thisthat_users?schema=public

# Redis (Optional - app works without it, but slower)
REDIS_URL=redis://localhost:6379

# JWT Secrets (CHANGE THESE IN PRODUCTION!)
JWT_ACCESS_SECRET=your-super-secret-access-token-change-this-in-production
JWT_REFRESH_SECRET=your-super-secret-refresh-token-change-this-in-production
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Polymarket API Configuration (Optional - uses public Gamma API by default)
POLYMARKET_API_KEY=
POLYMARKET_API_SECRET=
POLYMARKET_API_PASSPHRASE=
POLYMARKET_BASE_URL=https://gamma-api.polymarket.com

# Market ingestion job configuration
MARKET_INGEST_LIMIT=1000
MARKET_INGEST_CRON=*/5 * * * *

# App Configuration (V1 Credits System)
MIN_BET_AMOUNT=10
MAX_BET_AMOUNT=10000
DAILY_REWARD_CREDITS=100
STARTING_CREDITS=1000

# X OAuth Configuration
X_CLIENT_ID=your_x_client_id
X_CLIENT_SECRET=your_x_client_secret
X_REDIRECT_URI=https://www.growgami.com/api/v1/auth/x/callback
FRONTEND_URL=https://www.growgami.com

# Rate Limiting Configuration
# Critical processes (betting, economy, purchases)
RATE_LIMIT_CRITICAL_MAX=30
RATE_LIMIT_CRITICAL_WINDOW=60000

# Authentication endpoints
RATE_LIMIT_AUTH_MAX=10
RATE_LIMIT_AUTH_WINDOW=900000

# Standard user-facing endpoints
RATE_LIMIT_STANDARD_MAX=100
RATE_LIMIT_STANDARD_WINDOW=60000

# External API calls (market ingestion)
RATE_LIMIT_EXTERNAL_MAX=5
RATE_LIMIT_EXTERNAL_WINDOW=60000

# Background jobs
RATE_LIMIT_JOB_MAX=1
RATE_LIMIT_JOB_WINDOW=60000

# Category Prefetching (Intelligent System)
# Minimum markets per category before triggering prefetch
MIN_MARKETS_PER_CATEGORY=500
# Maximum markets allowed per category (10,000 limit)
MAX_MARKETS_PER_CATEGORY=10000
# How many markets to fetch per prefetch batch
PREFETCH_BATCH_SIZE=1000
# Cron schedule for category monitoring (every 5 minutes)
CATEGORY_PREFETCH_CRON=*/5 * * * *
# Prefetch cache TTL (seconds) and max cached markets per category
CATEGORY_PREFETCH_CACHE_TTL_SECONDS=300
CATEGORY_PREFETCH_CACHE_LIMIT=200
# Prefetch queue configuration
PREFETCH_QUEUE_MAX_ATTEMPTS=3
PREFETCH_QUEUE_RETRY_BASE_MS=30000
PREFETCH_QUEUE_RETRY_BACKOFF_MULTIPLIER=2
PREFETCH_QUEUE_POLL_INTERVAL_MS=1000
PREFETCH_QUEUE_CONCURRENCY=1
PREFETCH_QUEUE_MANUAL_TIMEOUT_MS=180000

# Legacy Market Ingestion (Keep for manual triggers)
MARKET_INGEST_LIMIT=1000
MARKET_INGEST_CRON=*/30 * * * *

